@use "../_func.scss" as *;

:is(abbr[title], .tooltip) {

  text-decoration: underline;
  text-underline-offset: 0.2em;
  text-decoration-thickness: 2px;
  text-decoration-style: dashed;
  text-decoration-color: var(--colour-underline);
  position: relative;
  cursor: help;

  &:is(:hover, :focus, :active){

    text-decoration: none;
  }
}

@mixin tooltip(){

  display: block;
  z-index: var(--index-above);
  position: absolute;
  top: calc(100% + 0.25rem);
  left: 50%;
  min-width: max(120%, #{rem(100)});
  transform: translate(-50%,0);
  background: var(--bs-body-bg);
  color: inherit;
  padding: 0.5em;
  border-radius: 3px;
  box-shadow: 1px 1px 3px 1px rgba(0,0,0,0.3);
}

.tooltip {


  &:after{

    content: "";
    display: inline-block;
    margin-left: 0.1em;
    margin-bottom: 0.1em;
    width: 0.8em;
    height: 0.9em;
    vertical-align: text-bottom;
    background: currentColor;
    mask-image: var(--icon-question);
    mask-size: 100%;
    mask-repeat: no-repeat;
    mask-position: 50% 50%;
    -webkit-mask-image: var(--icon-question);
    -webkit-mask-size: 100%;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-position: 50% 50%;
  }

  .tooltip__content {

    opacity: 0;
    position: absolute;
    
  }

  &:is(:hover, :focus, :active){

    .tooltip__content {

      opacity: 1;
      @include tooltip();
    }
  }
}

@media (hover: none) {
  
  :is(abbr[title], .tooltip[title]) {

    &:is(:hover, :focus, :active):before{
      
      content: attr(title);
      @include tooltip();
    }
  }
}